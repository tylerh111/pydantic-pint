Refactored validation check on quantity making it simpler to follow.
The issue regarding strict mode not properly failing validation is fixed as well.
